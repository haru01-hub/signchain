"use strict";(()=>{var e={};e.id=9173,e.ids=[9173],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},91336:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>f,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var o={};r.r(o),r.d(o,{GET:()=>l,OPTIONS:()=>d});var n=r(49303),s=r(88716),i=r(60670),a=r(87070),u=r(71732),c=r(45256),p=r(58543);async function l(e){await (0,c.X)();let{searchParams:t}=new URL(e.url),r=t.get("email");if(!r||"string"!=typeof r)return a.NextResponse.json({message:"이메일이 필요합니다."},{status:400});try{let e=(await u.Z.find({})).some(e=>(function(e){if(!e||"string"!=typeof e||!e.includes(":"))return e||"";try{return(0,p.LJ)(e)}catch(e){return""}})(e.email)===r);return a.NextResponse.json({exists:e})}catch(e){return a.NextResponse.json({message:"서버 오류",error:e.message},{status:500})}}async function d(){return a.NextResponse.json({},{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"}})}let f=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/user/check-email/route",pathname:"/api/user/check-email",filename:"route",bundlePath:"app/api/user/check-email/route"},resolvedPagePath:"E:\\test2\\app\\api\\user\\check-email\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:g}=f,y="/api/user/check-email/route";function x(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},45256:(e,t,r)=>{let o;r.d(t,{X:()=>a});var n=r(11185),s=r.n(n);let i=process.env.MONGODB_URI;if(!i)throw Error("MongoDB URI가 .env에 설정되어 있지 않습니다.");async function a(){o.conn&&o.conn.readyState>=1||(o.promise||(o.promise=s().connect(i).then(e=>e.connection)),o.conn=await o.promise)}global.mongoose?o=global.mongoose:(o={conn:null,promise:null},global.mongoose=o)},71732:(e,t,r)=>{r.d(t,{Z:()=>i});var o=r(11185),n=r.n(o);let s=new o.Schema({username:{type:String,required:!0,unique:!0},email:{type:String,required:!0,unique:!0},password:{type:String,required:!0},publicKey:{type:String},certificate:{type:String},otpEnabled:{type:Boolean,default:!1},otpSecret:{type:String},otpVerified:{type:Boolean,default:!1},certificateStatus:{type:String,default:"valid"},currentRefreshJti:{type:String}}),i=n().models.User||n().model("User",s)},58543:(e,t,r)=>{let o;r.d(t,{LJ:()=>i,UN:()=>s}),o=r(84770);let n="aes-256-cbc";function s(e){if(!o)throw Error("Node.js crypto not available");let t=Buffer.from(process.env.EMAIL_AES_KEY,"hex"),r=o.randomBytes(16),s=o.createCipheriv(n,t,r),i=s.update(e,"utf8","hex");return i+=s.final("hex"),r.toString("hex")+":"+i}function i(e){if(!o)throw Error("Node.js crypto not available");let t=Buffer.from(process.env.EMAIL_AES_KEY,"hex"),[r,s]=e.split(":"),i=Buffer.from(r,"hex"),a=o.createDecipheriv(n,t,i);return a.update(s,"hex","utf8")+a.final("utf8")}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[9276,5972],()=>r(91336));module.exports=o})();