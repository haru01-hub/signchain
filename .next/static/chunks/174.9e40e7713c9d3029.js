"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[174],{4174:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var r=n(7437),o=n(2265);function i(e){let{contractId:t}=e,[n,i]=(0,o.useState)([]),[l,s]=(0,o.useState)(null),[d,a]=(0,o.useState)(!0),[c,h]=(0,o.useState)("");return(0,o.useEffect)(()=>{(async()=>{a(!0),h("");try{let e=await fetch("/api/logs/".concat(t)),n=await e.json();i(n.logs);let r=!0;for(let e=1;e<n.logs.length;e++)if(n.logs[e].previousHash!==n.logs[e-1].hash){r=!1;break}s(r)}catch(e){h("로그를 불러오지 못했습니다.")}finally{a(!1)}})()},[t]),(0,r.jsxs)("div",{style:{maxWidth:600,margin:"40px auto",padding:24,border:"1px solid #eee",borderRadius:10,background:"#fafbfc"},children:[(0,r.jsx)("h2",{style:{fontSize:20,marginBottom:18},children:"로그 해시체인"}),(0,r.jsx)("button",{onClick:()=>{let e=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download="contract-logchain-".concat(t,".json"),o.click(),URL.revokeObjectURL(r)},style:{marginBottom:16,padding:"6px 14px",borderRadius:6,background:"#1976d2",color:"#fff",border:"none",cursor:"pointer",fontWeight:500},children:"로그 내보내기(JSON)"}),d?(0,r.jsx)("div",{style:{color:"#888"},children:"불러오는 중..."}):c?(0,r.jsx)("div",{style:{color:"red"},children:c}):0===n.length?(0,r.jsx)("div",{style:{color:"#888"},children:"로그가 없습니다."}):(0,r.jsxs)(r.Fragment,{children:[!1===l&&(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsxs)("div",{style:{background:"#fff",borderRadius:16,boxShadow:"0 4px 32px #0003",padding:"48px 36px",minWidth:320,maxWidth:"90vw",textAlign:"center",fontSize:20,color:"#d32f2f",fontWeight:700,border:"2px solid #d32f2f",letterSpacing:.5},children:["❌ 해시체인 검증 실패!",(0,r.jsx)("br",{}),"로그가 변조되었을 수 있습니다.",(0,r.jsx)("br",{}),(0,r.jsx)("span",{style:{fontSize:15,color:"#555",fontWeight:400},children:"관리자에게 문의하거나, 데이터의 신뢰성을 확인하세요."})]})}),(0,r.jsx)("div",{style:{marginBottom:16,fontWeight:500,color:l?"green":"red"},children:null===l?"검증 중...":l?"✅ 해시체인 무결성 검증: 이상 없음":""}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:n.map((e,t)=>(0,r.jsxs)("div",{style:{border:"1px solid #ccc",borderRadius:8,padding:14,background:"#fff"},children:[(0,r.jsxs)("div",{style:{fontSize:13,color:"#1976d2",marginBottom:4},children:["#",t+1," ",e.filename]}),(0,r.jsxs)("div",{style:{fontSize:12,color:"#555",marginBottom:2},children:[(0,r.jsx)("strong",{children:"타입:"})," ",e.encapsulation,e.createdAt&&(0,r.jsx)("span",{style:{marginLeft:10,color:"#888"},children:new Date(e.createdAt).toLocaleString()})]}),(0,r.jsxs)("div",{style:{fontSize:12,wordBreak:"break-all"},children:[(0,r.jsx)("strong",{children:"Hash:"})," ",e.hash]}),(0,r.jsxs)("div",{style:{fontSize:12,wordBreak:"break-all",color:"#888"},children:[(0,r.jsx)("strong",{children:"Prev:"})," ",e.previousHash||"(없음)"]})]},e._id))})]})]})}}}]);