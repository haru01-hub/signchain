(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{1163:function(e,t,n){Promise.resolve().then(n.bind(n,2833))},2833:function(e,t,n){"use strict";n.r(t);var r=n(7437),s=n(2265),o=n(9376),a=n(3519);n(1551);var i=n(4335);function l(e){return/^[\w-.]+@[\w-]+\.[a-zA-Z]{2,}$/.test(e)}function d(e){return e.length>=8&&/[!@#$%^&*]/.test(e)}function u(e){return e.length>=3&&/^[a-zA-Z0-9]+$/.test(e)}t.default=()=>{let e=(0,o.useRouter)(),[t,n]=(0,s.useState)({username:"",email:"",password:""}),[c,m]=(0,s.useState)(""),[p,h]=(0,s.useState)(""),[f,g]=(0,s.useState)({}),[x,y]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),b=u(t.username)&&l(t.email)&&d(t.password),w=e=>{n({...t,[e.target.name]:e.target.value}),g({...f,[e.target.name]:!0}),m("")},S=async n=>{if(n&&n.preventDefault(),!b){m("입력값을 다시 확인하세요.");return}m(""),y(!0);try{let n=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await n.json();if(n.ok)s.redirectTo&&s.redirectTo.startsWith("/otp/setup")&&e.push(s.redirectTo),h(s.message||"회원가입 성공");else{var r;(null===(r=s.message)||void 0===r?void 0:r.includes("인증서가 만료"))?j(!0):m(s.message||"회원가입 실패")}}catch(e){m("서버 오류가 발생했습니다.")}finally{y(!1)}},C=e=>{"Enter"===e.key&&S(e)};return(0,r.jsxs)("div",{className:"card",style:{maxWidth:400,margin:"auto",padding:32},children:[(0,r.jsx)("h1",{style:{marginBottom:24},children:"회원가입"}),(0,r.jsxs)("form",{onSubmit:S,style:{display:"flex",flexDirection:"column",gap:18},children:[(0,r.jsx)("input",{type:"text",name:"username",placeholder:"아이디",value:t.username,onChange:w,onKeyDown:C,style:{marginBottom:6,borderColor:f.username&&!u(t.username)?"red":void 0}}),f.username&&!u(t.username)&&(0,r.jsx)("div",{style:{color:"red",fontSize:13,marginBottom:8},children:"아이디는 3자 이상, 영문/숫자만 가능합니다."}),(0,r.jsx)("input",{type:"email",name:"email",placeholder:"이메일",value:t.email,onChange:w,onKeyDown:C,style:{marginBottom:6,borderColor:f.email&&!l(t.email)?"red":void 0}}),f.email&&!l(t.email)&&(0,r.jsx)("div",{style:{color:"red",fontSize:13,marginBottom:8},children:"이메일 형식이 올바르지 않습니다."}),(0,r.jsx)("input",{type:"password",name:"password",placeholder:"비밀번호 (8자 이상, 특수문자 포함)",value:t.password,onChange:w,onKeyDown:C,style:{marginBottom:6,borderColor:f.password&&!d(t.password)?"red":void 0}}),f.password&&!d(t.password)&&(0,r.jsx)("div",{style:{color:"red",fontSize:13,marginBottom:8},children:"비밀번호는 8자 이상, 특수문자 포함이어야 합니다."}),(0,r.jsx)("button",{type:"submit",disabled:!b,style:{width:"100%",marginTop:16,marginBottom:8,padding:"12px 0",fontSize:17},children:"회원가입"})]}),c&&(0,r.jsx)("p",{style:{color:"red",marginTop:18},children:c}),p&&(0,r.jsx)("p",{style:{color:"green",marginTop:18},children:p}),x&&(0,r.jsx)(a.Z,{}),v&&(0,r.jsx)(i.Z,{message:"인증서가 만료되었습니다. 재발급이 필요합니다.",onConfirm:()=>{j(!1),e.push("/register")},onCancel:()=>{j(!1),e.push("/register")},confirmLabel:"확인",cancelLabel:"닫기"}),(0,r.jsxs)("div",{style:{marginTop:32,color:"#555",fontSize:15,textAlign:"center"},children:["이미 계정이 있으신가요?"," ",(0,r.jsx)("a",{href:"/login",style:{color:"#2483bf",textDecoration:"underline"},children:"로그인"})," ","하거나",(0,r.jsx)("br",{}),"회원가입을 진행해주세요."]})]})}},4335:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7437);function s(e){let{message:t,onConfirm:n,onCancel:s,integrityMsg:o="",children:a,confirmLabel:i="확인",cancelLabel:l="취소"}=e;return(0,r.jsx)("div",{className:"confirm-modal-backdrop",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#0008",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsxs)("div",{style:{background:"#fff",borderRadius:10,padding:32,minWidth:320,boxShadow:"0 2px 16px #0003"},onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{style:{marginBottom:18},children:[(0,r.jsx)("b",{children:t}),a]}),(0,r.jsx)("div",{style:{display:"flex",gap:12,marginBottom:10,justifyContent:"center"},children:(0,r.jsx)("button",{onClick:n,style:{background:"#1976d2",color:"#fff",border:"none",borderRadius:6,padding:"8px 18px",fontWeight:500},children:i})}),o&&(0,r.jsx)("div",{style:{color:o.includes("완료")?"green":"red",fontWeight:600},children:o})]})})}n(2265)},3519:function(e,t,n){"use strict";var r=n(7437);n(2265),n(1551),t.Z=()=>(0,r.jsx)("div",{className:"spinner-overlay",children:(0,r.jsx)("div",{className:"spinner"})})},9376:function(e,t,n){"use strict";var r=n(5475);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},1551:function(){}},function(e){e.O(0,[63,971,117,744],function(){return e(e.s=1163)}),_N_E=e.O()}]);