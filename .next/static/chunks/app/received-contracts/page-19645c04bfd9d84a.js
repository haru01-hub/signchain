(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[406],{5506:function(e,t,n){Promise.resolve().then(n.bind(n,4363))},4363:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x},dynamic:function(){return g}});var i=n(7437),r=n(1130),o=n(2265),a=n(4260);function l(e){let{contract:t,onClick:n,refEl:r,focusedIdx:o,idx:l,arr:d,setFocusedIdx:s,handlePreview:c,isMobile:u,onDelete:f}=e;return(0,i.jsxs)("div",{ref:r,tabIndex:0,style:{border:"1px solid #eee",borderRadius:10,padding:u?14:20,width:u?"100%":340,background:"#fafbfc",boxShadow:"0 2px 8px #0001",cursor:"pointer",outline:o===l?"2px solid #1976d2":"none",margin:u?"0 auto":void 0},onClick:n,onFocus:()=>s(l),onKeyDown:e=>{"Enter"===e.key&&n(),"ArrowRight"===e.key&&l<d.length-1&&s(l+1),"ArrowLeft"===e.key&&l>0&&s(l-1),"ArrowDown"===e.key&&l+2<d.length&&s(l+2),"ArrowUp"===e.key&&l-2>=0&&s(l-2)},children:[(0,i.jsx)("div",{style:{fontWeight:700,fontSize:18,marginBottom:8},children:t.title}),(0,i.jsxs)("div",{style:{fontSize:14,color:"#1976d2",marginBottom:4},children:["송신자: ",t.senderEmail]}),(0,i.jsxs)("div",{style:{fontSize:13,color:"#888",marginBottom:4},children:["수신자: ",t.recipientEmail]}),(0,i.jsxs)("div",{style:{fontSize:13,color:"#888",marginBottom:4},children:["업로드: ",new Date(t.createdAt).toLocaleString()]}),(0,i.jsxs)("div",{style:{fontSize:13,color:"#888",marginBottom:4},children:["최종 처리: ",new Date(t.updatedAt).toLocaleString()]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[(0,i.jsx)("span",{style:{fontSize:13,fontWeight:600,color:"signed"===t.status?"#009e3c":"pending_signature"===t.status?"#1976d2":"uploaded"===t.status?"#ff9800":"expired"===t.status||new Date(t.expirationDate)<new Date?"#fff":"rejected"===t.status?"#fff":"#888",background:"signed"===t.status?"#e6f9ed":"pending_signature"===t.status?"#e3f0ff":"uploaded"===t.status?"#fff7e6":"expired"===t.status||new Date(t.expirationDate)<new Date?"#ff5252":"rejected"===t.status?"#ff5252":"#f4f4f4",borderRadius:6,padding:"2px 10px",marginRight:4},"aria-label":"상태: ".concat(t.status),children:t.status}),(0,i.jsxs)("span",{style:{fontSize:12,color:new Date(t.expirationDate)<new Date?"#ff5252":"#888",fontWeight:new Date(t.expirationDate)<new Date?700:400},children:["만료일: ",new Date(t.expirationDate).toLocaleDateString(),new Date(t.expirationDate)<new Date&&" (만료됨)"]})]}),(0,i.jsx)("a",{href:t.filePath,download:!0,style:{color:"#1976d2",fontWeight:500,textDecoration:"underline",fontSize:15},children:"계약서 다운로드"}),(0,i.jsx)("button",{style:{marginLeft:8,background:"#eee",color:"#1976d2",border:"none",borderRadius:6,padding:"4px 12px",fontWeight:500,fontSize:14,cursor:"pointer"},onClick:e=>{e.stopPropagation(),c(t)},"aria-label":"미리보기",children:"미리보기"}),(0,i.jsx)("button",{style:{marginLeft:8,background:"none",border:"none",color:"#ff5252",cursor:"pointer",fontSize:20,display:"inline-flex",alignItems:"center",verticalAlign:"middle"},title:"삭제","aria-label":"삭제",onClick:e=>{e.stopPropagation(),console.debug("[DEBUG] 수신자 삭제 버튼 클릭:",t._id),f&&f(t)},children:(0,i.jsx)(a.AMf,{})})]},t._id)}var d=n(9743);function s(e){var t;let{contract:n,show:r,onClose:a}=e,[l,s]=(0,o.useState)([]),[c,u]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{r&&n&&(u(!0),fetch("/api/logs/".concat(n._id)).then(e=>e.json()).then(e=>s(e.logs||[])).finally(()=>u(!1)))},[r,n]),r&&n)?(0,i.jsx)("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.25)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},onClick:a,children:(0,i.jsxs)("div",{style:{background:"#fff",borderRadius:12,padding:32,minWidth:400,maxWidth:600,width:"95vw",boxShadow:"0 4px 24px #0002",textAlign:"left",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("div",{style:{fontSize:20,fontWeight:700,marginBottom:12},children:n.title}),(0,i.jsxs)("div",{style:{fontSize:14,color:"#1976d2",marginBottom:4},children:["보낸 사람: ",(0,d.I)(n.senderEmail)]}),(0,i.jsxs)("div",{style:{fontSize:13,color:"#888",marginBottom:4},children:["수신자: ",(0,d.I)(n.recipientEmail)]}),(0,i.jsxs)("div",{style:{fontSize:13,color:"#888",marginBottom:4},children:["업로드: ",new Date(n.createdAt).toLocaleString()]}),(0,i.jsxs)("div",{style:{fontSize:13,color:"#888",marginBottom:4},children:["최종 처리: ",new Date(n.updatedAt).toLocaleString()]}),(0,i.jsxs)("div",{style:{fontSize:13,color:"signed"===n.status?"green":"rejected"===n.status?"#ff5252":"#888",marginBottom:8},"aria-label":"상태: ".concat(n.status),children:["상태: ",n.status]}),"rejected"===n.status&&(0,i.jsx)("div",{style:{color:"#ff5252",fontWeight:500,marginBottom:8},"aria-live":"polite",children:"계약서가 거부/반려되었습니다."}),(0,i.jsx)("a",{href:n.filePath,download:!0,style:{color:"#1976d2",fontWeight:500,textDecoration:"underline",fontSize:15},children:"계약서 다운로드"}),(null===(t=n.signature)||void 0===t?void 0:t.signatureImageDigital)&&(0,i.jsxs)("div",{style:{marginTop:16},children:[(0,i.jsx)("div",{style:{fontWeight:500,marginBottom:4},children:"손글씨 서명"}),(0,i.jsx)("img",{src:n.signature.signatureImageDigital,alt:"손글씨 서명",style:{width:180,border:"1px solid #eee",borderRadius:6}})]}),(0,i.jsxs)("div",{style:{marginTop:24},children:[(0,i.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"진행 이력"}),c?(0,i.jsx)("div",{style:{color:"#888"},children:"이력 불러오는 중..."}):0===l.length?(0,i.jsx)("div",{style:{color:"#888"},children:"이력이 없습니다."}):(0,i.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0},children:l.map(e=>(0,i.jsxs)("li",{style:{marginBottom:8,fontSize:14},children:[(0,i.jsx)("span",{style:{fontWeight:500},children:e.encapsulation})," -"," ",e.tag," ",(0,i.jsx)("span",{style:{color:"#888"},children:new Date(e.createdAt).toLocaleString()})]},e._id))})]}),(0,i.jsx)("button",{style:{marginTop:24},onClick:a,children:"닫기"})]})}):null}var c=n(166),u=n(6896);n(9882),n(8746);let f=(0,c.default)(()=>Promise.all([n.e(618),n.e(768)]).then(n.bind(n,618)).then(e=>e.Document),{loadableGenerated:{webpack:()=>[3996]},ssr:!1}),p=(0,c.default)(()=>Promise.all([n.e(618),n.e(768)]).then(n.bind(n,618)).then(e=>e.Page),{loadableGenerated:{webpack:()=>[3996]},ssr:!1});function h(e){let{contracts:t,loading:n}=e,[r,a]=o.useState(""),[d,c]=o.useState("all"),[u,h]=o.useState(!1),[g,x]=(0,o.useState)(null),y=(0,o.useRef)([]),[m,w]=(0,o.useState)(!1),[v,b]=(0,o.useState)(null),[j,S]=(0,o.useState)(null),[k,C]=(0,o.useState)(null),[E,D]=(0,o.useState)(""),[P,z]=(0,o.useState)(1),[L,W]=(0,o.useState)(1),[A,O]=(0,o.useState)(!1);o.useEffect(()=>{let e=()=>h(window.innerWidth<600);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,o.useEffect)(()=>{if(!j)return;let e=e=>{"Escape"===e.key&&(S(null),C(null)),"pdf"===j&&("ArrowRight"===e.key&&L<P&&W(L+1),"ArrowLeft"===e.key&&L>1&&W(L-1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[j,L,P]);let _=async e=>{var t;let n=e.filename?null===(t=e.filename.split(".").pop())||void 0===t?void 0:t.toLowerCase():"";if(W(1),"pdf"===n||"docx"===n){let t=await fetch("/api/contract/".concat(e._id,"/preview"));if(!t.ok){O(!0);return}let i=await t.blob();C(URL.createObjectURL(i)),S(n),D(""),w(!1)}else if("txt"===n){let t=await fetch(e.filePath);D(await t.text()),S("txt"),C(e.filePath),w(!1)}else S("other"),C(null),w(!1)};return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:u?12:24,alignItems:"center",flexDirection:u?"column":"row"},children:[(0,i.jsx)("input",{type:"text",placeholder:"제목 또는 보낸사람 검색",value:r,onChange:e=>a(e.target.value),style:{flex:1,padding:u?"8px 8px":"8px 14px",borderRadius:6,border:"1px solid #ddd",fontSize:u?14:15,width:u?"100%":void 0,marginBottom:u?8:0}}),(0,i.jsxs)("select",{value:d,onChange:e=>c(e.target.value),style:{padding:u?"8px 8px":"8px 14px",borderRadius:6,border:"1px solid #ddd",fontSize:u?14:15,width:u?"100%":void 0},children:[(0,i.jsx)("option",{value:"all",children:"전체 상태"}),(0,i.jsx)("option",{value:"signed",children:"서명 완료"}),(0,i.jsx)("option",{value:"pending_signature",children:"서명 대기"}),(0,i.jsx)("option",{value:"uploaded",children:"업로드됨"}),(0,i.jsx)("option",{value:"expired",children:"만료"})]})]}),n?(0,i.jsx)("div",{style:{color:"#888"},children:"불러오는 중..."}):0===t.length?(0,i.jsx)("div",{style:{color:"#888"},children:"수신한 계약서가 없습니다."}):(0,i.jsx)("div",{style:{display:"flex",flexWrap:u?"nowrap":"wrap",flexDirection:u?"column":"row",gap:u?12:24},children:t.filter(e=>(""===r||e.title.toLowerCase().includes(r.toLowerCase())||e.senderEmail.toLowerCase().includes(r.toLowerCase()))&&("all"===d||("expired"===d?"expired"===e.status||new Date(e.expirationDate)<new Date:e.status===d))).map((e,t,n)=>(0,i.jsx)(l,{contract:e,refEl:e=>y.current[t]=e,focusedIdx:g,idx:t,arr:n,setFocusedIdx:x,handlePreview:_,isMobile:u},e._id))}),j&&(0,i.jsx)("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.25)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>{S(null),C(null),D("")},tabIndex:0,"aria-modal":"true",role:"dialog",children:(0,i.jsxs)("div",{style:{background:"#fff",borderRadius:12,padding:24,minWidth:320,maxWidth:700,width:"90vw",boxShadow:"0 4px 24px #0002",textAlign:"center",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("div",{style:{fontWeight:700,fontSize:18,marginBottom:16},children:"미리보기"}),"pdf"===j&&(0,i.jsxs)("div",{style:{width:"100%",maxWidth:600,height:600,maxHeight:600,overflowY:"auto",overflowX:"hidden",margin:"0 auto",background:"#fff",borderRadius:8,display:"block"},children:[(0,i.jsx)(f,{file:k,loading:"PDF 불러오는 중...",onLoadSuccess:e=>{let{numPages:t}=e;return z(t)},children:(0,i.jsx)(p,{pageNumber:L,width:550})}),(0,i.jsxs)("div",{style:{marginTop:12,display:"flex",justifyContent:"center",alignItems:"center",gap:12},children:[(0,i.jsx)("button",{onClick:()=>W(e=>Math.max(1,e-1)),disabled:1===L,"aria-label":"이전 페이지",children:"◀"}),(0,i.jsxs)("span",{children:[L," / ",P]}),(0,i.jsx)("button",{onClick:()=>W(e=>Math.min(P,e+1)),disabled:L===P,"aria-label":"다음 페이지",children:"▶"})]}),(0,i.jsx)("div",{style:{color:"#888",fontSize:13,marginTop:8},children:"(←, → 키로 페이지 이동, ESC로 닫기)"})]}),"txt"===j&&(0,i.jsx)("pre",{style:{textAlign:"left",background:"#f4f4f4",padding:16,borderRadius:8,maxHeight:500,overflow:"auto",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:E}),"other"===j&&(0,i.jsx)("div",{style:{color:"#888"},children:"미리보기를 지원하지 않는 파일 형식입니다."}),(0,i.jsx)("button",{style:{marginTop:20},onClick:()=>{S(null),C(null),D("")},"aria-label":"미리보기 닫기",children:"닫기"})]})}),(0,i.jsx)(s,{contract:v,show:m,onClose:()=>w(!1)}),A&&(0,i.jsx)("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.25)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>O(!1),tabIndex:0,"aria-modal":"true",role:"dialog",children:(0,i.jsxs)("div",{style:{background:"#fff",borderRadius:12,padding:24,minWidth:320,maxWidth:700,width:"90vw",boxShadow:"0 4px 24px #0002",textAlign:"center",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("div",{style:{fontWeight:700,fontSize:18,marginBottom:16},children:"오류"}),(0,i.jsx)("div",{style:{color:"#888"},children:"미리보기를 불러오는 중 오류가 발생했습니다. 다시 시도해주세요."}),(0,i.jsx)("button",{style:{marginTop:20},onClick:()=>O(!1),"aria-label":"닫기",children:"닫기"})]})})]})}u.GlobalWorkerOptions.workerSrc="/pdf.worker.min.mjs";let g="force-dynamic";function x(){let{contracts:e,loading:t}=(0,r.z)(),n=window.localStorage.getItem("userEmail"),o=(e||[]).filter(e=>e.recipientEmail===n&&!0===e.received);return(0,i.jsx)(h,{contracts:o,loading:t})}},9743:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(7437),r=n(2265),o=n(9274);function a(e){if(!e||"string"!=typeof e||!e.includes(":"))return e||"";try{return(0,o.LJ)(e)}catch(e){return""}}t.Z=e=>{let{notifications:t,loading:n,selectedId:o,onNotificationClick:a,filter:l,setFilter:d,onRead:s,onDelete:c}=e,u=async(e,t)=>{if(t.read)try{await fetch("/api/auth/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),s&&s(e)}catch(e){}else try{await fetch("/api/auth/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),s&&s(e)}catch(e){}setTimeout(()=>{a({...t,read:!0})},0)};t.filter(e=>!e.read).length;let[f,p]=(0,r.useState)([]);return(0,i.jsx)("div",{style:{minWidth:340},children:n?(0,i.jsx)("div",{style:{color:"#888",padding:16},children:"불러오는 중..."}):0===t.length?(0,i.jsx)("div",{style:{color:"#888",padding:16},children:"알림이 없습니다."}):(0,i.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0},children:t.filter(e=>!f.includes(e.id)).map(e=>(0,i.jsx)("li",{onClick:t=>{t.stopPropagation(),p(t=>[...t,e.id]),e.read||u(e.id,e),a({...e,read:!0})},style:{background:e.read?"#f7f7f7":"#e3f0ff",color:e.read?"#888":"#1976d2",fontWeight:e.read?400:600,borderLeft:e.read?"4px solid #ccc":"4px solid #1976d2",padding:"0 16px",marginBottom:16,borderRadius:16,cursor:e.read?"default":"pointer",boxShadow:o===e.id?"0 2px 8px #1976d233":"0 1px 2px #0001",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",transition:"background 0.2s, color 0.2s",opacity:e.read?.7:1,minWidth:340,fontFamily:"inherit",fontSize:17,height:60,overflow:"hidden"},children:(0,i.jsx)("span",{style:{flex:1,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",color:e.read?"#888":"#1976d2",fontWeight:e.read?400:600,fontSize:17,paddingLeft:2,paddingRight:8,lineHeight:"1.4",maxHeight:"2.8em",wordBreak:"break-all"},title:e.message,children:e.message})},e.id))})})}},1130:function(e,t,n){"use strict";n.d(t,{ContractProvider:function(){return a},z:function(){return l}});var i=n(7437),r=n(2265);let o=(0,r.createContext)(void 0);function a(e){let{children:t}=e,[n,a]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0),s=(0,r.useCallback)(async()=>{d(!0);try{let e=await fetch("/api/contract",{credentials:"include"});if(!e.ok)throw Error("API error");let t=await e.json();a(t||[])}catch(e){a([])}finally{d(!1)}},[]);return(0,r.useEffect)(()=>{let e=!1;async function t(){e||await s()}t();let n=setInterval(t,1e4);return()=>{e=!0,clearInterval(n)}},[s]),(0,i.jsx)(o.Provider,{value:{contracts:n,loading:l,refreshContracts:s},children:t})}function l(){let e=(0,r.useContext)(o);if(!e)throw Error("useContractContext must be used within a ContractProvider");return e}},166:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var i=n(5775),r=n.n(i)},5775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let i=n(917);n(7437),n(2265);let r=i._(n(5602));function o(e,t){var n;let i={loading:e=>{let{error:t,isLoading:n,pastDelay:i}=e;return null}};"function"==typeof e&&(i.loader=e);let o={...i,...t};return(0,r.default)({...o,modules:null==(n=o.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let i=n(8993);function r(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new i.BailoutToCSRError(t);return n}},5602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let i=n(7437),r=n(2265),o=n(1523),a=n(49);function l(e){return{default:e&&"default"in e?e.default:e}}let d={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},s=function(e){let t={...d,...e},n=(0,r.lazy)(()=>t.loader().then(l)),s=t.loading;function c(e){let l=s?(0,i.jsx)(s,{isLoading:!0,pastDelay:!0,error:null}):null,d=t.ssr?(0,i.jsxs)(i.Fragment,{children:["undefined"==typeof window?(0,i.jsx)(a.PreloadCss,{moduleIds:t.modules}):null,(0,i.jsx)(n,{...e})]}):(0,i.jsx)(o.BailoutToCSR,{reason:"next/dynamic",children:(0,i.jsx)(n,{...e})});return(0,i.jsx)(r.Suspense,{fallback:l,children:d})}return c.displayName="LoadableComponent",c}},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return o}});let i=n(7437),r=n(544);function o(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,r.getExpectedRequestStore)("next/dynamic css"),o=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));o.push(...t)}}return 0===o.length?null:(0,i.jsx)(i.Fragment,{children:o.map(e=>(0,i.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},178:function(e,t,n){"use strict";n.d(t,{w_:function(){return d}});var i=n(2265),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=i.createContext&&i.createContext(r),a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},l=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)0>t.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function d(e){return function(t){return i.createElement(s,a({attr:a({},e.attr)},t),function e(t){return t&&t.map(function(t,n){return i.createElement(t.tag,a({key:n},t.attr),e(t.child))})}(e.child))}}function s(e){var t=function(t){var n,r=e.attr,o=e.size,d=e.title,s=l(e,["attr","size","title"]),c=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),i.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,s,{className:n,style:a(a({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),d&&i.createElement("title",null,d),e.children)};return void 0!==o?i.createElement(o.Consumer,null,function(e){return t(e)}):t(r)}},9274:function(e,t,n){"use strict";let i;n.d(t,{LJ:function(){return s},bd:function(){return a},hH:function(){return u},jz:function(){return d},oj:function(){return l},vm:function(){return f}});var r=n(2957).lW,o=n(257);async function a(e,t){let n=new TextEncoder,i=await window.crypto.subtle.importKey("raw",n.encode(e),{name:"PBKDF2"},!1,["deriveKey"]);return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:n.encode(t),iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function l(e,t){var n;if(!(null===(n=window.crypto)||void 0===n?void 0:n.subtle))throw Error("이 브라우저는 WebCrypto를 지원하지 않습니다.");let i=new TextEncoder,r=window.crypto.getRandomValues(new Uint8Array(12)),o=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,i.encode(e));return{iv:btoa(String.fromCharCode(...r)),data:btoa(String.fromCharCode(...new Uint8Array(o)))}}async function d(e,t){var n;if(!(null===(n=window.crypto)||void 0===n?void 0:n.subtle))throw Error("이 브라우저는 WebCrypto를 지원하지 않습니다.");let i=new TextDecoder,r=Uint8Array.from(atob(e.iv),e=>e.charCodeAt(0)),o=Uint8Array.from(atob(e.data),e=>e.charCodeAt(0)),a=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:r},t,o);return i.decode(a)}function s(e){if(!i)throw Error("Node.js crypto not available");let t=r.from(o.env.EMAIL_AES_KEY,"hex"),[n,a]=e.split(":"),l=r.from(n,"hex"),d=i.createDecipheriv("aes-256-cbc",t,l);return d.update(a,"hex","utf8")+d.final("utf8")}async function c(){return a("5012145a3c04312f81ce8b38c90d875f7de96b868f94f451cd6d6709a92d7c23","38f74cb399659a9016a080d65395986f")}async function u(e){let t=await c(),{iv:n,data:i}=await l(e,t);return JSON.stringify({iv:n,data:i})}async function f(e){try{console.log("[decryptLocal] 입력값:",e);let t=await c(),n=JSON.parse(e);console.log("[decryptLocal] 파싱된 iv:",n.iv),console.log("[decryptLocal] 파싱된 data:",n.data);let i=await d({iv:n.iv,data:n.data},t);return console.log("[decryptLocal] 복호화 결과:",i),i}catch(e){throw console.error("[decryptLocal] 복호화 중 에러:",e),e}}},9882:function(){},8746:function(){}},function(e){e.O(0,[324,420,489,244,971,117,744],function(){return e(e.s=5506)}),_N_E=e.O()}]);